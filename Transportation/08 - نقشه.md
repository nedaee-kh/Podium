# نقشه 
سرویس نقشه یکی از مهم‌ترین سرویس‌هایی است که هر کسب و کار مبتنی بر حمل‌و‌نقل آنلاین باید آن را در سیستم خود پیاده‌سازی کند. در حال حاضر پلتفرم نقشه‌ی نشان یکی از جامع‌ترین پلتفرم‌هایی است که شما می‌توانید از آن استفاده کنید.

<div class="box-end">
</div>

## جستجو
برای جستجوی نام خیابان‌ها، نام‌های قدیمی، اماکن و کسب و کارهای ثبت‌شده  بر روی نقشه (Location Based Search API) می‌توانید از وب‌سرویس جستجوی نشان استفاده کنید. این وب‌سرویس بهترین نتایج ممکن را با توجه به نقطه‌ی  مرجع (طول و عرض جغرافیایی مکانی که جستجو بایستی حول آن انجام شود) در  اختیار شما قرار می‌دهد. در پاسخ به هر درخواست جستجو حداکثر ۳۰ نتیجه‌ی  مرتبط توسط وب‌سرویس برگردانده می‌شود.
وب سرویس جستجوی مکان محور نقشه نشان یکی از کامل‌ترین سرویس‌های جستجو  مبتنی بر موقعیت ایرانی می‌باشد. این سرویس با پشتیبانی کامل از زبان فارسی و نگارش‌های مختلف از حروف فارسی، با توجه به موقعیت جغرافیایی مورد نظر  شما (نقطه مرجع) بهترین نتایج را به صورت مرتب‌شده بر اساس فاصله تا آن  نقطه مرجع در پاسخ باز می‌گرداند.

![توضیح تصویر](https://core.pod.land/nzh/image/?imageId=207561&width=800&height=200&hashCode=16c13231ecd-0.056176942445581135)

نقطه مرجع در این سرویس می‌تواند موقعیت جاری کاربر یا مرکز نقشه‌ای که کاربر مشاهده می‌کند باشد. این نقطه باید به‌صورت طول و عرض جغرافیایی( Latitude & Longitude) ارسال گردد. پارامتر نقطه‌ی مرجع به شما کمک می‌کند نتایج بهتری را در  خروجی داشته باشید. با توجه به معماری سرویس جستجوی مکان‌محور نشان، شما  محدودیتی در دریافت نتایج بسیار دور از نقطه‌ی مرجع (به عنوان مثال در شهری
 دیگر) را نیز نخواهید داشت. این نقطه می‌تواند مکان جغرافیایی کاربر نهایی  شما یا مرکز نقشه‌ای که مشاهده می‌کند باشد.

    HEADER:
        Api-Key=[YOUR_API_KEY]
    Method:
        GET
    Url:
        [base-url]/v1/search

شماره محصول برای فراخوانی به صورت سرویس کال: productId = **18913**
در فراخوانی متد فوق بصورت سرویس کال و از طریق پاد، نیازی به ارسال هدر Api-Key نیست و شما بایستی پارامتر serviceCallToken را  مطابق توضیحاتی که در صفحه [نحوه استفاده از سرویس کال پاد](https://docs.pod.land/v1.0.8.0/Developer/ServiceCall/1231/ServiceCallUsage) آمده است تنظیم نمایید.

### پارامترهای ورودی

+ term: عبارت جستجو
+ lat: عرض جغرافیایی مرکز جستجو (latitude)
+ lng: طول جغرافیایی مرکز جستجو (longitude)
<div class="box-end">
</div>
##  تبدیل موقعیت به آدرس 

از طریق وب‌سرویس تبدیل نقطه‌ی جغرافیایی به آدرس (Reverse Geocoding API ) به سادگی می‌توانید با ارسال طول و عرض جغرافیایی موردنظر، اطلاعاتی نظیر آدرس دقیق، نام محله، منطقه‌ی شهرداری، در طرح ترافیک بودن (تهران) و در  طرح زوج و فرد بودن (تهران، مشهد، اصفهان) آن نقطه را دریافت کنید.

	HEADER:
    Api-Key=[YOUR_API_KEY]
    Method:
    GET
    Url:
    [base-url]/v2/reverse
شماره محصول برای فراخوانی به صورت سرویس کال: productId = 15838

در فراخوانی متد فوق بصورت سرویس کال و از طریق پاد، نیازی به ارسال هدر Api-Key نیست و شما بایستی پارامتر serviceCallToken را مطابق توضیحاتی که در صفحه [نحوه استفاده از سرویس کال پاد](https://docs.pod.land/v1.0.8.0/Developer/ServiceCall/1231/ServiceCallUsage) آمده است تنظیم نمایید.

###	پارامترهای ورودی

+ lat: عرض جغرافیایی مرکز جستجو (latitude)
+ lng: طول جغرافیایی مرکز جستجو (longitude)
<div class="box-end">
</div>
## مسیریابی با درنظر گرفتن ترافیک 
پلتفرم نقشه نشان با بهره‌گیری از داده و مشارکت جامعه کاربران دو میلیونی  مسیریاب نشان، تنها ارائه‌دهنده ایرانی سرویس مسیریابی بر اساس دیتای  ترافیک آنلاین است.
با استفاده از وب‌سرویس مسیریابی (Direction API) شما می‌توانید بهترین  مسیر بین دو نقطه‌ی مشخص را به دست آورید. محاسبه مسیر با توجه به ترافیک  معابر محاسبه می‌شود و هر پاسخ ممکن است شامل یک یا چند مسیر باشد. در هر  مسیر زمان سفر و مسافت آن محاسبه می‌گردد. مرتب‌سازی مسیرها بر اساس بهترین مسیر از نظر زمان و مسافت خواهد بود.


    HEADER:
        Api-Key=[YOUR_API_KEY]
    Method:
        GET
    Url:
        [base-url]/v2/direction
    
    
شماره محصول برای فراخوانی به صورت سرویس کال: productId = 18916

در فراخوانی متد فوق بصورت سرویس کال و از طریق پاد، نیازی به ارسال هدر Api-Key نیست و شما بایستی پارامتر serviceCallToken را مطابق توضیحاتی که در صفحه [نحوه استفاده از سرویس کال پاد](https://docs.pod.land/v1.0.8.0/Developer/ServiceCall/1231/ServiceCallUsage) آمده است تنظیم نمایید.

### پارامترهای ورودی

+ و**origin:**مختصات نقطه شروع مسیریابی، این مختصات باید به صورت `latitude,longitude باشد که دو عدد با کاما از هم جدا شده‌اند.
+ و **destination:** مختصات نقطه پایان مسیریابی که قالب آن مانند نقطه شروع است.
+ و **waypoints:** این پارامتر اختیاری بوده و برای مشخص کردن نقاط میانی مسیر استفاده می‌شود. فرمت ارسال هر نقطه میانی به صورت`latitude,longitude` می‌باشد. در صورتی که بیش از یک نقطه میانی دارید با به صورت زیر آن‌ها را با علامت پایت (|) از هم جدا کنید: `latitude,longitude|latitude,longitude`
+ و **avoidTrafficZone:** این پارامتر اختیاری بوده و مقادیر آن `true` یا `false` می‌تواند باشد. در صورتی که این پارامتر true باشد مسیر از داخل طرح ترافیک عبور نخواهد کرد. همچین در صورتی که مقصد داخل طرح ترافیک باشد هیچ مسیری پیدا نمی‌شود.
+ و **avoidOddEvenZone:** این پارامتر اختیاری بوده و مقادیر آن `true` یا `false` می‌تواند باشد. در صورتی که این پارامتر true باشد مسیر از داخل طرح زوج و فرد عبور نخواهد کرد. همچین در صورتی که مقصد داخل طرح ترافیک باشد هیچ مسیری پیدا نمی‌شود.
+ و **alternative:** این پارامتر اختیاری بوده و مقادیر آن `true` یا `false` می‌تواند باشد. در صورتی که این پارامتر true باشد و مسیرهای جایگزین برای نقاط مشخص شده وجود داشته باشد این مسیرها در پاسخ ارائه خواهند شد. (مقدار پیش فرض این پارامتر false است)
با توجه به اینکه نام **طرح ترافیک** در شهرهای دیگر (غیر از تهران) عموماً یه جای **طرح زوج و فرد** نیز استفاده می‌شود، چنانچه در سایر شهرها هر یک از پارامترهای avoidTrafficZone و avoidOddEvenZone مقدار `true` داشته باشند و مقصد درون طرح زوج و فرد آن شهر باشد، سرویس مسیریابی خطای `NoRouteFound` در پاسخ برمی‌گرداند.

<div class="box-end">
</div>

## مسیریابی بدون درنظر گرفتن ترافیک 
با استفاده از وب‌سرویس مسیریابی بدون در نظر گرفتن ترافیک (No Traffic Direction API) شما می‌توانید مسیرهای بین دو نقطه‌ی مشخص را به دست آورید. محاسبه مسیر با بدون در نظر گرفتن ترافیک معابر محاسبه می‌شودو هر پاسخ ممکن است شامل یک یا چند مسیر باشد. در هر مسیر زمان سفر و مسافت آن محاسبه می‌گردد. مرتب‌سازی مسیرها بر اساس بهترین مسیر از نظر زمان و  مسافت خواهد بود. 

    HEADER:
        Api-Key=[YOUR_API_KEY]
    Method:
        GET
    Url:
        [base-url]/v2/direction/no-traffic
            
            
   
   شماره محصول برای فراخوانی به صورت سرویس کال: productId = **18917**
   در فراخوانی متد فوق بصورت سرویس کال و از طریق پاد، نیازی به ارسال هدر Api-Key نیست و شما بایستی پارامتر serviceCallToken را مطابق توضیحاتی که در صفحه [نحوه استفاده از سرویس کال پاد](https://docs.pod.land/v1.0.8.0/Developer/ServiceCall/1231/ServiceCallUsage) آمده است تنظیم نمایید.
   
###  پارامترهای ورودی
+ و**origin:**مختصات نقطه شروع مسیریابی، این مختصات باید به صورت `latitude,longitude` باشد که دو عدد با کاما از هم جدا شده‌اند.
+ و **destination:** مختصات نقطه پایان مسیریابی که قالب آن مانند نقطه شروع است.
+ و**waypoints:**این پارامتر اختیاری بوده و برای مشخص کردن نقاط میانی مسیر استفاده می‌شود. فرمت ارسال هر نقطه میانی به صورت `latitude,longitude` می‌باشد. در صورتی که بیش از یک نقطه میانی دارید با به صورت زیر آن‌ها را با علامت پایت (|) از هم جدا کنید:
`latitude,longitude|latitude,longitude`
+ و **avoidTrafficZone:**:این پارامتر اختیاری بوده و مقادیر آن `true` یا `false` می‌تواند باشد. در صورتی که این پارامتر true باشد مسیر از داخل طرح ترافیک عبور نخواهد کرد. همچین در صورتی که مقصد داخل طرح ترافیک باشد هیچ مسیری پیدا نمی‌شود.
+ و **avoidOddEvenZone:**: این پارامتر اختیاری بوده و مقادیر آن `true` یا `false` می‌تواند باشد. در صورتی که این پارامتر true باشد مسیر از داخل طرح زوج و فرد عبور نخواهد کرد. همچین در صورتی که مقصد داخل طرح ترافیک باشد هیچ مسیری پیدا نمی‌شود.
+ و **alternative:**: این پارامتر اختیاری بوده و مقادیر آن `true` یا `false` می‌تواند باشد. در صورتی که این پارامتر true باشد و مسیرهای جایگزین برای نقاط مشخص شده وجود داشته باشد این مسیرها در پاسخ ارائه خواهند شد. (مقدار پیش فرض این پارامتر false است)
با توجه به اینکه نام **طرح ترافیک** در شهرهای دیگر (غیر از تهران) عموماً یه جای **طرح زوج و فرد** نیز استفاده می‌شود، چنانچه در سایر شهرها هر یک از پارامترهای avoidTrafficZone و avoidOddEvenZone مقدار `true` داشته باشند و مقصد درون طرح زوج و فرد آن شهر باشد، سرویس مسیریابی خطای `NoRouteFound` در پاسخ برمی‌گرداند.

<div class="box-end">
</div>

## ماتریس فاصله 
پلتفرم نقشه نشان با بهره‌گیری از داده و مشارکت جامعه کاربران دو میلیونی  مسیریاب نشان، تنها ارائه‌دهنده ایرانی سرویس ماتریس فاصله بر اساس دیتای ترافیک آنلاین است.
با استفاده از وب‌سرویس ماتریس فاصله (Distance Matrix API) میتوانید فاصله و زمان حرکت میان ماتریسی از نقاط شروع و پایانی را به دست آورید. تمامی  فواصل و زمان‌ها با در نظر گرفتن بهترین مسیر بر اساس وضعیت فعلی ترافیک  محاسبه می‌شوند.

    HEADER:
        Api-Key=[YOUR_API_KEY]
    Method:
        GET
    Url:
        [base-url]/v1/distance-matrix

شماره محصول برای فراخوانی به صورت سرویس کال: productId = **18911**

در فراخوانی متد فوق بصورت سرویس کال و از طریق پاد، نیازی به ارسال هدر Api-Key نیست و شما بایستی پارامتر serviceCallToken را مطابق توضیحاتی که در صفحه [نحوه استفاده از سرویس کال پاد](https://docs.pod.land/v1.0.8.0/Developer/ServiceCall/1231/ServiceCallUsage) آمده است تنظیم نمایید.

### پارامترهای ورودی
و  **origins:** لیستی از مختصات نقاط شروعی. هر کدام از این مختصات باید به فرم latitude,longitude باشند که با کاما (,) از یکدیگر جدا شده‌اند. در صورتی که تعداد مختصات  بیشتر از یک عدد باشد از علامت پایپ ( | ) برای جداسازی آنها استفاده  می‌شود.
و **destinations:** لیستی از مختصات نقاط پایانی که قالب آن مانند origins است.
<div class="box-end">
</div>
## ماتریس فاصله بدون ترافیک 
پلتفرم نقشه نشان با بهره‌گیری از داده و مشارکت جامعه کاربران دو میلیونی  مسیریاب نشان، تنها ارائه‌دهنده ایرانی سرویس ماتریس فاصله بر اساس دیتای ترافیک آنلاین است.
 با استفاده از وب‌سرویس ماتریس فاصله (Distance Matrix API) میتوانید فاصله و زمان حرکت میان ماتریسی از نقاط شروع و پایانی را به دست آورید.در  محاسبات این سرویس وضعیت ترافیکی فعلی خیابان‌ها در نظر گرفته نمی‌شود. 

    HEADER:
        Api-Key=[YOUR_API_KEY]
    Method:
        GET
    Url:
        [base-url]/v1/distance-matrix/no-traffic

شماره محصول برای فراخوانی به صورت سرویس کال: productId = **18912**
در فراخوانی متد فوق بصورت سرویس کال و از طریق پاد، نیازی به ارسال هدر Api-Key نیست و شما بایستی پارامتر serviceCallToken را مطابق توضیحاتی که در صفحه [نحوه استفاده از سرویس کال پاد](https://docs.pod.land/v1.0.8.0/Developer/ServiceCall/1231/ServiceCallUsage) آمده است تنظیم نمایید.

### پارامترهای ورودی

+ و **origins:** لیستی از مختصات نقاط شروعی. هر کدام از این مختصات باید به فرم latitude,longitude باشند.
 که با کاما (,) از یکدیگر جدا شده‌اند. در صورتی که تعداد مختصات بیشتر از یک عدد باشد از علامت پایپ ( | ) برای جداسازی آنها استفاده می‌شود.
 
+ و **destinations:** لیستی از مختصات نقاط پایانی که قالب آن مانند origins است.

<div class="box-end">
</div>

## نگاشت نقطه بر نقشه
سرویس نگاشت نقطه بر نقشه (Map Matching API) تعدادی نقاط ورودی را به  محتمل‌ترین مسیری که این نقاط نشان‌دهنده آن هستند، نگاشت میکند.

    HEADER:
        Api-Key=[YOUR_API_KEY]
    Method:
        GET
    Url:
        [base-url]/v1/map-matching

شماره محصول برای فراخوانی به صورت سرویس کال: productId = **18918**
در فراخوانی متد فوق بصورت سرویس کال و از طریق پاد، نیازی به ارسال هدر Api-Key نیست و شما بایستی پارامترserviceCallToken  را مطابق توضیحاتی که در صفحه [نحوه استفاده از سرویس کال پاد](https://docs.pod.land/v1.0.8.0/Developer/ServiceCall/1231/ServiceCallUsage) آمده است تنظیم نمایید.

### پارامترهای ورودی
+ و path: نقاطی که باید به یک مسیر نگاشت شوند. هر کدام از این نقاط با علامت پایپ ( | ) از یکدیگر جدا شده‌اند.مختصات هر نقطه به فرم latitude,longitude حداقل تعداد نقاط ورودی برابر با 2 است در غیر این صورت خطای 470 برگردانده می‌شود. 

<div class="box-end">
</div>
